# ç¬¬åå…­ç« ï¼šé¢¨éšªèˆ‡å€«ç† â€” ç•¶ AI ä¸å†ä¸­ç«‹

> ã€Œæ¼”ç®—æ³•æ²’æœ‰åè¦‹ï¼Œä½†è¨“ç·´å®ƒçš„è³‡æ–™æœ‰ã€‚ã€

```
âš ï¸  è­¦å‘Šï¼šé€™ä¸€ç« æ²’æœ‰ã€Œæ­£ç¢ºç­”æ¡ˆã€
     ä½†å®ƒå¯èƒ½æ˜¯æ•´é–€èª²æœ€é‡è¦çš„ä¸€ç« ã€‚

     +------------------+
     |   ä½ çš„æ¨¡å‹      |
     |   accuracy: 95%  |
     |   ä½†æ˜¯...        |
     |   å°æŸå€‹ç¾¤é«”     |
     |   error rate: 40% |
     +------------------+
            |
            v
     é€™æ¨£çš„æ¨¡å‹ï¼Œè©²ä¸Šç·šå—ï¼Ÿ
```

---

## ğŸ¯ æœ¬ç« ç›®æ¨™

å®Œæˆæœ¬ç« å¾Œï¼Œä½ å°‡èƒ½å¤ ï¼š

1. è­˜åˆ¥è³‡æ–™èˆ‡æ¨¡å‹ä¸­çš„åè¦‹ä¾†æº
2. ç†è§£ä¸¦è™•ç†æ•¸æ“šä¸å¹³è¡¡å•é¡Œ
3. è§£é‡‹é»‘ç®±å•é¡ŒåŠå…¶è§£æ±ºæ–¹æ¡ˆ
4. è¨ˆç®—å…¬å¹³æ€§æŒ‡æ¨™ï¼ˆFairness Metricsï¼‰
5. åˆ†æçœŸå¯¦æ¡ˆä¾‹ä¸­çš„å€«ç†çˆ­è­°
6. ç†è§£ GDPR èˆ‡è³‡æ–™éš±ç§è¦ç¯„
7. å¯¦è¸è² è²¬ä»»çš„ AI åŸå‰‡
8. åŸ·è¡Œæ¨¡å‹å…¬å¹³æ€§ç¨½æ ¸

---

## 16.1 åè¦‹çš„ä¾†æºï¼šå•é¡Œæ¯”ä½ æƒ³çš„æ›´æ·±

### åè¦‹ä¸æ˜¯ bugï¼Œæ˜¯ featureï¼ˆçš„å‰¯ç”¢å“ï¼‰

æƒ³åƒä½ åœ¨è¨“ç·´ä¸€å€‹ã€Œé æ¸¬å“¡å·¥ç¸¾æ•ˆã€çš„æ¨¡å‹ã€‚ä½ ç”¨äº†å…¬å¸éå» 10 å¹´çš„è³‡æ–™ã€‚
è½èµ·ä¾†åˆç†å§ï¼Ÿä½†å¦‚æœéå» 10 å¹´ï¼Œå…¬å¸ä¸»ç®¡å¹¾ä¹éƒ½æ˜¯ç”·æ€§å‘¢ï¼Ÿ

```
éå» 10 å¹´çš„è³‡æ–™
+------------------------------------------+
| é«˜ç¸¾æ•ˆå“¡å·¥ç‰¹å¾µï¼š                          |
|   - æ€§åˆ¥ï¼šç”·ï¼ˆ85%ï¼‰                       |
|   - å¹´é½¡ï¼š30-45ï¼ˆ70%ï¼‰                    |
|   - å­¸æ­·ï¼šç‰¹å®šå¹¾æ‰€å¤§å­¸ï¼ˆ60%ï¼‰             |
+------------------------------------------+
           |
           | æ¨¡å‹å­¸åˆ°äº†ä»€éº¼ï¼Ÿ
           v
+------------------------------------------+
| ã€Œé«˜ç¸¾æ•ˆã€ â‰ˆ ç”·æ€§ + 30-45æ­² + åæ ¡       |
| é€™ä¸æ˜¯ç¸¾æ•ˆçš„çœŸç›¸ï¼Œæ˜¯æ­·å²åè¦‹çš„è¤‡è£½å“       |
+------------------------------------------+
```

### åè¦‹çš„å››å¤§ä¾†æº

```
+------------------+     +------------------+
|  1. æ­·å²åè¦‹     |     |  2. æ¨£æœ¬åè¦‹     |
|  Historical Bias |     |  Sampling Bias   |
|                  |     |                  |
|  è³‡æ–™åæ˜ äº†éå»  |     |  è³‡æ–™ä¸èƒ½ä»£è¡¨    |
|  ç¤¾æœƒçš„ä¸å…¬å¹³    |     |  çœŸå¯¦çš„ç¾¤é«”åˆ†å¸ƒ  |
+------------------+     +------------------+
         |                        |
         v                        v
+------------------+     +------------------+
|  3. æ¸¬é‡åè¦‹     |     |  4. èšåˆåè¦‹     |
|  Measurement     |     |  Aggregation     |
|  Bias            |     |  Bias            |
|                  |     |                  |
|  ç”¨ä¸é©ç•¶çš„æŒ‡æ¨™  |     |  å¿½ç•¥å­ç¾¤é«”çš„    |
|  ä¾†è¡¡é‡ç›®æ¨™      |     |  å·®ç•°            |
+------------------+     +------------------+
```

| åè¦‹é¡å‹ | èªªæ˜ | ä¾‹å­ |
|---------|------|------|
| æ­·å²åè¦‹ | è³‡æ–™æœ¬èº«åæ˜ äº†ç¤¾æœƒä¸å…¬ | è²¸æ¬¾å¯©æ ¸è³‡æ–™ä¸­ï¼Œå°‘æ•¸æ—è£”è¢«æ‹’ç‡è¼ƒé«˜ |
| æ¨£æœ¬åè¦‹ | è¨“ç·´è³‡æ–™ä¸å…·ä»£è¡¨æ€§ | é†«ç™‚ AI åªç”¨ç™½äººæ‚£è€…è³‡æ–™è¨“ç·´ |
| æ¸¬é‡åè¦‹ | ä»£ç†æŒ‡æ¨™ä¸é©ç•¶ | ç”¨ã€Œé€®æ•æ¬¡æ•¸ã€ä»£æ›¿ã€ŒçŠ¯ç½ªç‡ã€ |
| èšåˆåè¦‹ | ä¸€å€‹æ¨¡å‹å¥—ç”¨æ‰€æœ‰äºº | ç³–å°¿ç—…é¢¨éšªæ¨¡å‹å¿½ç•¥ç¨®æ—å·®ç•° |

### ğŸ’¡ é‡é»è§€å¿µ

> **åè¦‹æ˜¯ä¸€å€‹ç³»çµ±æ€§å•é¡Œï¼Œä¸æ˜¯æŠ€è¡“æ€§å•é¡Œã€‚** ä½ ä¸èƒ½åªé èª¿åƒæ•¸ä¾†æ¶ˆé™¤åè¦‹ï¼Œ
> å¿…é ˆå¾è³‡æ–™æ”¶é›†ã€å•é¡Œå®šç¾©ã€åˆ°æ¨¡å‹éƒ¨ç½²çš„æ¯å€‹ç’°ç¯€éƒ½ä»”ç´°å¯©è¦–ã€‚

---

## 16.2 æ•¸æ“šä¸å¹³è¡¡ï¼šç•¶å°‘æ•¸ç¾¤é«”è¢«å¿½è¦–

### ä»€éº¼æ˜¯æ•¸æ“šä¸å¹³è¡¡ï¼Ÿ

```
æ­£å¸¸è³‡æ–™é›†ï¼š
é¡åˆ¥ A: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (50%)
é¡åˆ¥ B: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (50%)

ä¸å¹³è¡¡è³‡æ–™é›†ï¼š
é¡åˆ¥ A: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (95%)
é¡åˆ¥ B: â–ˆâ–ˆ (5%)

æ¨¡å‹çš„ã€Œè°æ˜ã€ç­–ç•¥ï¼š
  â†’ å…¨éƒ¨é æ¸¬ç‚º A â†’ accuracy = 95%ï¼
  â†’ ä½†å° B çš„é æ¸¬å®Œå…¨å¤±æ•—
```

### çœŸå¯¦å ´æ™¯ï¼šä¿¡ç”¨å¡è©æ¬ºåµæ¸¬

```python
import numpy as np
from sklearn.datasets import make_classification
from sklearn.model_selection import train_test_split
from sklearn.linear_model import LogisticRegression
from sklearn.metrics import classification_report

# æ¨¡æ“¬ä¸å¹³è¡¡è³‡æ–™ï¼ˆè©æ¬º vs æ­£å¸¸äº¤æ˜“ï¼‰
X, y = make_classification(
    n_samples=10000,
    n_features=20,
    n_informative=10,
    weights=[0.97, 0.03],   # 97% æ­£å¸¸ï¼Œ3% è©æ¬º
    random_state=42
)

X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.3, random_state=42
)

# ä¸è™•ç†ä¸å¹³è¡¡ï¼Œç›´æ¥è¨“ç·´
model = LogisticRegression(max_iter=1000)
model.fit(X_train, y_train)
y_pred = model.predict(X_test)

print("=== æœªè™•ç†ä¸å¹³è¡¡ ===")
print(classification_report(y_test, y_pred))
# æ³¨æ„çœ‹ class 1 (è©æ¬º) çš„ recall æœ‰å¤šä½ï¼
```

### è™•ç†ä¸å¹³è¡¡çš„ç­–ç•¥

```
ç­–ç•¥ä¸€è¦½ï¼š
+--------------------------------------------------+
|                                                    |
|  1. è³‡æ–™å±¤é¢                                       |
|     +-- éæ¡æ¨£ (Oversampling)ï¼šè¤‡è£½å°‘æ•¸é¡          |
|     +-- æ¬ æ¡æ¨£ (Undersampling)ï¼šæ¸›å°‘å¤šæ•¸é¡         |
|     +-- SMOTEï¼šåˆæˆå°‘æ•¸é¡æ¨£æœ¬                      |
|                                                    |
|  2. æ¼”ç®—æ³•å±¤é¢                                     |
|     +-- class_weight='balanced'                    |
|     +-- èª¿æ•´æ±ºç­–é–¾å€¼ (threshold)                   |
|                                                    |
|  3. è©•ä¼°å±¤é¢                                       |
|     +-- ä¸è¦åªçœ‹ accuracyï¼                        |
|     +-- ä½¿ç”¨ precision, recall, F1, AUC-ROC        |
|                                                    |
+--------------------------------------------------+
```

```python
from imblearn.over_sampling import SMOTE
from sklearn.metrics import roc_auc_score

# æ–¹æ³• 1ï¼šSMOTE éæ¡æ¨£
smote = SMOTE(random_state=42)
X_train_sm, y_train_sm = smote.fit_resample(X_train, y_train)

print(f"SMOTE å‰ï¼š{np.bincount(y_train)}")
print(f"SMOTE å¾Œï¼š{np.bincount(y_train_sm)}")

# æ–¹æ³• 2ï¼šclass_weight='balanced'
model_balanced = LogisticRegression(
    class_weight='balanced',
    max_iter=1000
)
model_balanced.fit(X_train, y_train)
y_pred_balanced = model_balanced.predict(X_test)

print("\n=== ä½¿ç”¨ class_weight='balanced' ===")
print(classification_report(y_test, y_pred_balanced))
print(f"AUC-ROC: {roc_auc_score(y_test, model_balanced.predict_proba(X_test)[:,1]):.4f}")
```

### ğŸ§  å‹•å‹•è…¦

> åœ¨é†«ç™‚è¨ºæ–·ä¸­ï¼Œä½ æ­£åœ¨å»ºç«‹ä¸€å€‹ã€Œç™Œç—‡åµæ¸¬ã€æ¨¡å‹ã€‚
> è³‡æ–™ä¸­åªæœ‰ 2% çš„æ¨£æœ¬æ˜¯é™½æ€§ï¼ˆæœ‰ç™Œç—‡ï¼‰ã€‚
>
> å•é¡Œï¼š
> 1. å¦‚æœæ¨¡å‹æŠŠæ‰€æœ‰äººéƒ½é æ¸¬ç‚ºã€Œæ²’æœ‰ç™Œç—‡ã€ï¼Œaccuracy æ˜¯å¤šå°‘ï¼Ÿ
> 2. é€™ç¨®æƒ…æ³ä¸‹ï¼Œä½ æœ€é—œå¿ƒçš„æŒ‡æ¨™æ‡‰è©²æ˜¯ä»€éº¼ï¼Ÿç‚ºä»€éº¼ï¼Ÿ
> 3. ä½ æœƒé¸æ“‡ precision å„ªå…ˆé‚„æ˜¯ recall å„ªå…ˆï¼Ÿç‚ºä»€éº¼ï¼Ÿ

---

## 16.3 é»‘ç®±å•é¡Œï¼šç•¶æ¨¡å‹ç„¡æ³•è§£é‡‹è‡ªå·±

### ä»€éº¼æ˜¯é»‘ç®±å•é¡Œï¼Ÿ

```
å¯è§£é‡‹æ¨¡å‹ï¼ˆç™½ç®±ï¼‰ï¼š                é»‘ç®±æ¨¡å‹ï¼š

Input â†’ æ±ºç­–æ¨¹ â†’ Output             Input â†’ æ·±åº¦ç¥ç¶“ç¶²è·¯ â†’ Output
  |                  |                |                      |
  |  "å› ç‚ºå¹´é½¡>65    |                |   "å› ç‚º...          |
  |   ä¸”è¡€å£“>140     |                |    å—¯...            |
  |   æ‰€ä»¥é«˜é¢¨éšª"    |                |    å°±æ˜¯é€™æ¨£"        |
  |                  |                |                      |
  +--å¯ä»¥è§£é‡‹ç‚ºä»€éº¼--+                +---ç„¡æ³•è§£é‡‹ç‚ºä»€éº¼----+
```

### æ¨¡å‹å¯è§£é‡‹æ€§å…‰è­œ

```
é«˜å¯è§£é‡‹æ€§ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ä½å¯è§£é‡‹æ€§

ç·šæ€§å›æ­¸   æ±ºç­–æ¨¹   é‚è¼¯å›æ­¸   éš¨æ©Ÿæ£®æ—   æ¢¯åº¦æå‡   æ·±åº¦å­¸ç¿’
  â”‚          â”‚        â”‚          â”‚          â”‚          â”‚
  â–¼          â–¼        â–¼          â–¼          â–¼          â–¼
 ä¿‚æ•¸       è¦å‰‡     æ©Ÿç‡      ç‰¹å¾µé‡è¦æ€§  éƒ¨åˆ†å¯è§£   é»‘ç®±
 ç›´æ¥       ç›´è§€     æ¸…æ™°      é–“æ¥å¯è§£    é‡‹
 è§£è®€       æ˜ç­     å¯è®€      è®€
```

### è§£é‡‹é»‘ç®±çš„å·¥å…·

```python
# æ–¹æ³• 1ï¼šç‰¹å¾µé‡è¦æ€§ï¼ˆé©ç”¨æ–¼æ¨¹æ¨¡å‹ï¼‰
from sklearn.ensemble import RandomForestClassifier
import matplotlib.pyplot as plt

model_rf = RandomForestClassifier(n_estimators=100, random_state=42)
model_rf.fit(X_train, y_train)

# æŸ¥çœ‹ç‰¹å¾µé‡è¦æ€§
importances = model_rf.feature_importances_
indices = np.argsort(importances)[::-1]

print("ç‰¹å¾µé‡è¦æ€§æ’åï¼š")
for i in range(min(10, len(indices))):
    print(f"  {i+1}. Feature {indices[i]}: {importances[indices[i]]:.4f}")
```

```python
# æ–¹æ³• 2ï¼šSHAP (SHapley Additive exPlanations)
# pip install shap
import shap

explainer = shap.TreeExplainer(model_rf)
shap_values = explainer.shap_values(X_test[:100])

# SHAP å‘Šè¨´ä½ ï¼šæ¯å€‹ç‰¹å¾µå°ã€Œé€™ä¸€ç­†ã€é æ¸¬çš„è²¢ç»
# æ­£å€¼ â†’ æ¨å‘æ­£é¡ï¼Œè² å€¼ â†’ æ¨å‘è² é¡

# æ–¹æ³• 3ï¼šLIME (Local Interpretable Model-agnostic Explanations)
# pip install lime
from lime.lime_tabular import LimeTabularExplainer

explainer_lime = LimeTabularExplainer(
    X_train,
    mode='classification',
    feature_names=[f'Feature_{i}' for i in range(X_train.shape[1])]
)

# è§£é‡‹å–®ä¸€é æ¸¬
exp = explainer_lime.explain_instance(
    X_test[0],
    model_rf.predict_proba,
    num_features=10
)
```

### â“ æ²’æœ‰ç¬¨å•é¡Œ

**Qï¼šé»‘ç®±æ¨¡å‹è¡¨ç¾æ›´å¥½ï¼Œç‚ºä»€éº¼ä¸ç›´æ¥ç”¨ï¼Ÿ**
> Aï¼šåœ¨å¾ˆå¤šå ´æ™¯ä¸­ï¼Œã€Œè§£é‡‹ç‚ºä»€éº¼ã€è·Ÿã€Œé æ¸¬æº–ç¢ºã€ä¸€æ¨£é‡è¦ã€‚ç•¶é†«ç”Ÿéœ€è¦å‘ç—…äºº
> è§£é‡‹è¨ºæ–·çµæœã€ç•¶éŠ€è¡Œéœ€è¦å‘å®¢æˆ¶è§£é‡‹è²¸æ¬¾è¢«æ‹’çš„åŸå› ï¼Œä½ ä¸èƒ½åªèªªã€Œé›»è…¦èªªä¸è¡Œã€ã€‚
> åœ¨æŸäº›åœ‹å®¶ï¼ˆå¦‚æ­ç›Ÿï¼‰ï¼Œæ³•å¾‹ç”šè‡³è¦æ±‚æ¼”ç®—æ³•æ±ºç­–å¿…é ˆå¯ä»¥è§£é‡‹ã€‚

**Qï¼šSHAP å’Œ LIME æœ‰ä»€éº¼å·®åˆ¥ï¼Ÿ**
> Aï¼šSHAP åŸºæ–¼åšå¼ˆè«–ï¼Œè¨ˆç®—æ¯å€‹ç‰¹å¾µçš„ã€Œé‚Šéš›è²¢ç»ã€ï¼Œç†è«–åŸºç¤æ›´åš´è¬¹ä½†è¨ˆç®—é‡å¤§ã€‚
> LIME åœ¨å±€éƒ¨ç”¨ç°¡å–®æ¨¡å‹è¿‘ä¼¼è¤‡é›œæ¨¡å‹ï¼Œé€Ÿåº¦å¿«ä½†æ¯æ¬¡è§£é‡‹å¯èƒ½ç•¥æœ‰ä¸åŒã€‚
> å¯¦å‹™ä¸Šå…©è€…å¸¸å¸¸ä¸€èµ·ä½¿ç”¨ä¾†äº¤å‰é©—è­‰ã€‚

**Qï¼šæ‰€æœ‰æ¨¡å‹éƒ½éœ€è¦å¯è§£é‡‹å—ï¼Ÿ**
> Aï¼šä¸ä¸€å®šã€‚æ¨è–¦ç³»çµ±æ¨è–¦ä½ ä¸€éƒ¨é›»å½±ï¼Œä¸éœ€è¦å¤ªå¤šè§£é‡‹ã€‚ä½†å¦‚æœæ¨¡å‹æ±ºå®šä½ èƒ½å¦
> ç²å¾—å‡é‡‹ã€èƒ½å¦æ‹¿åˆ°è²¸æ¬¾ã€èƒ½å¦éŒ„å–ï¼Œé‚£çµ•å°éœ€è¦å¯è§£é‡‹æ€§ã€‚
> è¶Šæ˜¯å½±éŸ¿äººç”Ÿçš„æ±ºç­–ï¼Œè¶Šéœ€è¦é€æ˜åº¦ã€‚

---

## 16.4 å…¬å¹³æ€§æŒ‡æ¨™ï¼šå¦‚ä½•é‡åŒ–ã€Œå…¬å¹³ã€

### å…¬å¹³çš„ä¸åŒå®šç¾©

å…¬å¹³è½èµ·ä¾†ç°¡å–®ï¼Œä½†æ•¸å­¸ä¸Šè‡³å°‘æœ‰ 21 ç¨®ä¸åŒçš„å®šç¾©ï¼Œè€Œä¸”å®ƒå€‘ä¹‹é–“å¸¸å¸¸äº’ç›¸çŸ›ç›¾ï¼

```
å…¬å¹³æ€§æŒ‡æ¨™çš„ä¸‰å¤§å®¶æ—ï¼š
+-------------------------------------------------------+
|                                                         |
|  1. ç¾¤é«”å…¬å¹³ (Group Fairness)                           |
|     æ¨¡å‹å°ä¸åŒç¾¤é«”çš„è¡¨ç¾æ˜¯å¦ç›¸ç•¶ï¼Ÿ                       |
|                                                         |
|  2. å€‹é«”å…¬å¹³ (Individual Fairness)                      |
|     ç›¸ä¼¼çš„äººæ˜¯å¦å¾—åˆ°ç›¸ä¼¼çš„çµæœï¼Ÿ                         |
|                                                         |
|  3. å› æœå…¬å¹³ (Causal Fairness)                          |
|     å—ä¿è­·å±¬æ€§æ˜¯å¦å› æœåœ°å½±éŸ¿äº†çµæœï¼Ÿ                     |
|                                                         |
+-------------------------------------------------------+
```

### é—œéµæŒ‡æ¨™

| æŒ‡æ¨™ | å®šç¾© | å…¬å¼ | ç›´è¦ºè§£é‡‹ |
|------|------|------|---------|
| Demographic Parity | P(Y=1\|A=0) = P(Y=1\|A=1) | å…©çµ„çš„æ­£é æ¸¬ç‡ç›¸åŒ | éŒ„å–ç‡æ‡‰è©²ä¸€æ¨£ |
| Equal Opportunity | TPR_A=0 = TPR_A=1 | å…©çµ„çš„ True Positive Rate ç›¸åŒ | çœŸæ­£åˆæ ¼çš„äººè¢«é¸ä¸­çš„æ©Ÿç‡ä¸€æ¨£ |
| Equalized Odds | TPR å’Œ FPR éƒ½ç›¸ç­‰ | TPR å’Œ FPR åœ¨ç¾¤é«”é–“ç›¸åŒ | çŠ¯éŒ¯çš„æ©Ÿç‡å°æ¯çµ„éƒ½ä¸€æ¨£ |
| Predictive Parity | PPV_A=0 = PPV_A=1 | å…©çµ„çš„ Precision ç›¸åŒ | è¢«é¸ä¸­çš„äººçœŸæ­£åˆæ ¼çš„æ¯”ä¾‹ä¸€æ¨£ |

```python
def demographic_parity(y_pred, sensitive_attr):
    """
    è¨ˆç®— Demographic Parity Difference

    ç†æƒ³å€¼ = 0ï¼ˆå…©çµ„æ­£é æ¸¬ç‡å®Œå…¨ç›¸åŒï¼‰
    """
    group_0 = y_pred[sensitive_attr == 0]
    group_1 = y_pred[sensitive_attr == 1]

    rate_0 = group_0.mean()
    rate_1 = group_1.mean()

    dp_diff = abs(rate_0 - rate_1)

    print(f"Group 0 æ­£é æ¸¬ç‡: {rate_0:.4f}")
    print(f"Group 1 æ­£é æ¸¬ç‡: {rate_1:.4f}")
    print(f"Demographic Parity Difference: {dp_diff:.4f}")

    # å¸¸ç”¨é–¾å€¼ï¼šå·®ç•° < 0.1 è¢«è¦–ç‚ºå¯æ¥å—
    if dp_diff < 0.1:
        print("âœ… é€šé Demographic Parity æª¢æŸ¥")
    else:
        print("âš ï¸  æœªé€šé Demographic Parity æª¢æŸ¥")

    return dp_diff


def equal_opportunity(y_true, y_pred, sensitive_attr):
    """
    è¨ˆç®— Equal Opportunity Difference

    åªçœ‹çœŸæ­£ç‚ºæ­£é¡çš„æ¨£æœ¬ï¼Œå…©çµ„çš„ TPR æ˜¯å¦ç›¸åŒ
    """
    # åªçœ‹çœŸæ­£ç‚ºæ­£é¡çš„
    pos_mask = y_true == 1

    group_0_tpr = y_pred[(sensitive_attr == 0) & pos_mask].mean()
    group_1_tpr = y_pred[(sensitive_attr == 1) & pos_mask].mean()

    eo_diff = abs(group_0_tpr - group_1_tpr)

    print(f"Group 0 TPR: {group_0_tpr:.4f}")
    print(f"Group 1 TPR: {group_1_tpr:.4f}")
    print(f"Equal Opportunity Difference: {eo_diff:.4f}")

    return eo_diff
```

### ğŸ’¡ é‡é»è§€å¿µ

> **ä¸å¯èƒ½å®šç† (Impossibility Theorem)**ï¼šé™¤äº†åœ¨æ¥µç‰¹æ®Šçš„æƒ…æ³ä¸‹ï¼Œ
> ä½ ç„¡æ³•åŒæ™‚æ»¿è¶³æ‰€æœ‰çš„å…¬å¹³æ€§å®šç¾©ã€‚ä½ å¿…é ˆæ ¹æ“šæ‡‰ç”¨å ´æ™¯ä¾†é¸æ“‡
> æœ€é©åˆçš„å…¬å¹³æ€§æŒ‡æ¨™ã€‚é€™æ˜¯ä¸€å€‹åƒ¹å€¼åˆ¤æ–·ï¼Œä¸åªæ˜¯æŠ€è¡“å•é¡Œã€‚

---

## 16.5 çœŸå¯¦æ¡ˆä¾‹ç ”ç©¶

### æ¡ˆä¾‹ä¸€ï¼šAmazon çš„æ‹›è˜ AIï¼ˆ2018ï¼‰

```
+----------------------------------------------------------+
|  Amazon æ‹›è˜æ¼”ç®—æ³•äº‹ä»¶                                     |
+----------------------------------------------------------+
|                                                            |
|  ç›®æ¨™ï¼šè‡ªå‹•ç¯©é¸å±¥æ­·ï¼Œæ‰¾å‡ºæœ€ä½³å€™é¸äºº                        |
|                                                            |
|  è¨“ç·´è³‡æ–™ï¼šéå» 10 å¹´çš„éŒ„å–æ±ºç­–                            |
|              â†“                                              |
|  å•é¡Œï¼šç§‘æŠ€æ¥­éå» 10 å¹´ä»¥ç”·æ€§ç‚ºä¸»å°                         |
|              â†“                                              |
|  çµæœï¼šAI å­¸æœƒäº†ã€Œæ­§è¦–å¥³æ€§ã€                               |
|    - å‡ºç¾ã€Œå¥³å­ã€å­—çœ¼çš„å±¥æ­·è¢«æ‰£åˆ†                          |
|    - å¥³å­å¤§å­¸ç•¢æ¥­è¢«æ‰£åˆ†                                    |
|    - ç³»çµ±æ€§åœ°åå¥½ç”·æ€§å€™é¸äºº                                |
|              â†“                                              |
|  æœ€çµ‚ï¼šAmazon å»¢æ£„äº†é€™å€‹ç³»çµ±                               |
|                                                            |
+----------------------------------------------------------+

æ•™è¨“ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ­·å²è³‡æ–™ â‰  å…¬å¹³è³‡æ–™                       â”‚
â”‚ 2. ç§»é™¤æ•æ„Ÿç‰¹å¾µä¸å¤ ï¼ˆä»£ç†è®Šæ•¸å•é¡Œï¼‰           â”‚
â”‚ 3. é«˜ accuracy ä¸ä»£è¡¨æ¨¡å‹å…¬å¹³                 â”‚
â”‚ 4. éœ€è¦äººé¡ç›£ç£ï¼Œä¸èƒ½å…¨è‡ªå‹•åŒ–                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¡ˆä¾‹äºŒï¼šCOMPAS ç´¯çŠ¯é æ¸¬ç³»çµ±

```
+----------------------------------------------------------+
|  COMPAS (Correctional Offender Management Profiling)       |
+----------------------------------------------------------+
|                                                            |
|  ç”¨é€”ï¼šé æ¸¬è¢«å‘Šå†çŠ¯çš„é¢¨éšªï¼Œå”åŠ©æ³•å®˜é‡åˆ‘                    |
|                                                            |
|  ProPublica èª¿æŸ¥ç™¼ç¾ (2016)ï¼š                              |
|                                                            |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        |
|  â”‚ é»‘äººè¢«å‘Šï¼š                                     â”‚        |
|  â”‚   - è¢«éŒ¯èª¤æ¨™è¨˜ç‚ºã€Œé«˜é¢¨éšªã€çš„æ¯”ç‡æ˜¯ç™½äººçš„ 2 å€  â”‚        |
|  â”‚   - False Positive Rate: 44.9%                 â”‚        |
|  â”‚                                                 â”‚        |
|  â”‚ ç™½äººè¢«å‘Šï¼š                                     â”‚        |
|  â”‚   - è¢«éŒ¯èª¤æ¨™è¨˜ç‚ºã€Œä½é¢¨éšªã€çš„æ¯”ç‡æ˜¯é»‘äººçš„ 2 å€  â”‚        |
|  â”‚   - False Negative Rate: 47.7%                 â”‚        |
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        |
|                                                            |
|  Northpointe å…¬å¸åé§ï¼š                                    |
|    æˆ‘å€‘çš„ Predictive Parityï¼ˆPPVï¼‰æ˜¯ç›¸ç­‰çš„ï¼               |
|                                                            |
|  é€™å°±æ˜¯ã€Œä¸å¯èƒ½å®šç†ã€çš„çœŸå¯¦é«”ç¾ï¼š                          |
|    Equalized Odds å’Œ Predictive Parity ç„¡æ³•åŒæ™‚æˆç«‹        |
|                                                            |
+----------------------------------------------------------+
```

### æ¡ˆä¾‹ä¸‰ï¼šé†«ç™‚è³‡æºåˆ†é…æ¼”ç®—æ³•

```
+----------------------------------------------------------+
|  Optum é†«ç™‚é¢¨éšªé æ¸¬ (2019, Science æœŸåˆŠå ±å°)               |
+----------------------------------------------------------+
|                                                            |
|  ç›®æ¨™ï¼šè­˜åˆ¥éœ€è¦é¡å¤–é†«ç™‚ç…§è­·çš„é«˜é¢¨éšªæ‚£è€…                    |
|                                                            |
|  ç”¨ä»€éº¼ä½œç‚ºã€Œå¥åº·éœ€æ±‚ã€çš„ä»£ç†æŒ‡æ¨™ï¼Ÿ                        |
|    â†’ é†«ç™‚èŠ±è²» (healthcare costs)                           |
|                                                            |
|  å•é¡Œï¼šé»‘äººæ‚£è€…å¹³å‡é†«ç™‚èŠ±è²»è¼ƒä½                            |
|    ï¼ˆä¸æ˜¯å› ç‚ºæ¯”è¼ƒå¥åº·ï¼Œè€Œæ˜¯å› ç‚ºå°±é†«æ©Ÿæœƒè¼ƒå°‘ï¼‰              |
|                                                            |
|  çµæœï¼šåŒæ¨£å¥åº·ç‹€æ³çš„é»‘äººæ‚£è€…                              |
|    è¢«ç³»çµ±åˆ¤å®šç‚ºã€Œè¼ƒä¸éœ€è¦ç…§è­·ã€                            |
|                                                            |
|  å½±éŸ¿ï¼šå¤§ç´„ 46% æ‡‰è©²è¢«è­˜åˆ¥ç‚ºé«˜é¢¨éšªçš„é»‘äººæ‚£è€…               |
|    è¢«ç³»çµ±éºæ¼äº†                                            |
|                                                            |
|  æ ¹æœ¬åŸå› ï¼šæ¸¬é‡åè¦‹ï¼ˆMeasurement Biasï¼‰                    |
|    èŠ±è²» â‰  å¥åº·éœ€æ±‚                                         |
|                                                            |
+----------------------------------------------------------+

æ•™è¨“ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¸æ“‡ä»£ç†æŒ‡æ¨™ (proxy) æ™‚è¦æ¥µåº¦å°å¿ƒ             â”‚
â”‚ çœ‹ä¼¼ä¸­ç«‹çš„è®Šæ•¸å¯èƒ½éš±å«ç³»çµ±æ€§åè¦‹               â”‚
â”‚ å¿…é ˆé©—è­‰ä»£ç†æŒ‡æ¨™æ˜¯å¦å°æ‰€æœ‰ç¾¤é«”éƒ½æœ‰æ•ˆ           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ§  å‹•å‹•è…¦

> å‡è¨­ä½ è¢«è˜è«‹ç‚ºæŸå®¶éŠ€è¡Œå»ºç«‹ä¸€å€‹ã€Œä¿¡ç”¨è©•åˆ†ã€æ¨¡å‹ã€‚
>
> 1. ä½ çš„è¨“ç·´è³‡æ–™ä¸­åŒ…å«ã€Œå±…ä½éƒµéå€è™Ÿã€é€™å€‹ç‰¹å¾µã€‚
>    é€™å¯èƒ½é€ æˆä»€éº¼å•é¡Œï¼Ÿ
> 2. éŠ€è¡Œèªªï¼šã€Œæˆ‘å€‘æ²’æœ‰ä½¿ç”¨ç¨®æ—ä½œç‚ºç‰¹å¾µå•Šï¼ã€
>    é€™æ¨£å°±èƒ½ä¿è­‰æ¨¡å‹å…¬å¹³å—ï¼Ÿç‚ºä»€éº¼ï¼Ÿ
> 3. å¦‚ä½•é©—è­‰ä½ çš„æ¨¡å‹æ˜¯å¦å°ä¸åŒæ—ç¾¤æœ‰å·®ç•°åŒ–å°å¾…ï¼Ÿ

---

## 16.6 GDPR èˆ‡è³‡æ–™éš±ç§

### æ­ç›Ÿã€Šä¸€èˆ¬è³‡æ–™ä¿è­·è¦å‰‡ã€‹(GDPR) é‡é»

```
GDPR å° AI/ML çš„é—œéµè¦æ±‚ï¼š
+----------------------------------------------------------+
|                                                            |
|  ç¬¬ 13-14 æ¢ï¼šé€æ˜æ€§                                       |
|  â”œâ”€â”€ å‘ŠçŸ¥ä½¿ç”¨è€…ä½ æ”¶é›†äº†ä»€éº¼è³‡æ–™                            |
|  â”œâ”€â”€ èªªæ˜è³‡æ–™çš„ç”¨é€”                                        |
|  â””â”€â”€ å‘ŠçŸ¥æ˜¯å¦ä½¿ç”¨è‡ªå‹•åŒ–æ±ºç­–                                |
|                                                            |
|  ç¬¬ 17 æ¢ï¼šè¢«éºå¿˜æ¬Š                                        |
|  â”œâ”€â”€ ä½¿ç”¨è€…å¯ä»¥è¦æ±‚åˆªé™¤å…¶è³‡æ–™                              |
|  â””â”€â”€ æ¨¡å‹å¦‚æœã€Œè¨˜ä½ã€äº†å€‹äººè³‡æ–™æ€éº¼è¾¦ï¼Ÿ                   |
|                                                            |
|  ç¬¬ 22 æ¢ï¼šè‡ªå‹•åŒ–æ±ºç­–çš„é™åˆ¶                                |
|  â”œâ”€â”€ å®Œå…¨è‡ªå‹•åŒ–çš„é‡å¤§æ±ºç­–ï¼Œä½¿ç”¨è€…æœ‰æ¬Šè¦æ±‚äººå·¥å¯©æŸ¥          |
|  â””â”€â”€ å¿…é ˆæä¾›ã€Œæœ‰æ„ç¾©çš„è§£é‡‹ã€                              |
|                                                            |
|  ç¬¬ 25 æ¢ï¼šè¨­è¨ˆéšæ®µçš„éš±ç§ä¿è­· (Privacy by Design)          |
|  â”œâ”€â”€ å¾è¨­è¨ˆéšæ®µå°±è€ƒæ…®éš±ç§                                  |
|  â””â”€â”€ æœ€å°åŒ–è³‡æ–™æ”¶é›†                                        |
|                                                            |
+----------------------------------------------------------+
```

### éš±ç§ä¿è­·æŠ€è¡“

| æŠ€è¡“ | èªªæ˜ | é©ç”¨å ´æ™¯ |
|------|------|---------|
| åŒ¿ååŒ– (Anonymization) | ç§»é™¤æ‰€æœ‰å¯è­˜åˆ¥è³‡è¨Š | è³‡æ–™ç™¼å¸ƒ |
| å‡ååŒ– (Pseudonymization) | ç”¨å‡åæ›¿ä»£çœŸåï¼Œå¯é€† | å…§éƒ¨ç ”ç©¶ |
| å·®åˆ†éš±ç§ (Differential Privacy) | åŠ å…¥æ•¸å­¸å™ªéŸ³ä¿è­·å€‹é«” | æ¨¡å‹è¨“ç·´ |
| è¯é‚¦å­¸ç¿’ (Federated Learning) | è³‡æ–™ä¸å‡ºè¨­å‚™ï¼Œæ¨¡å‹å»æ‰¾è³‡æ–™ | è·¨æ©Ÿæ§‹åˆä½œ |
| K-åŒ¿åæ€§ (K-anonymity) | æ¯ç­†è¨˜éŒ„è‡³å°‘æœ‰ k-1 ç­†ç›¸åŒ | è³‡æ–™ç™¼å¸ƒ |

```python
# å·®åˆ†éš±ç§çš„ç°¡å–®ç¤ºç¯„
# æ¦‚å¿µï¼šåŠ å…¥å™ªéŸ³ï¼Œä½¿å–®ä¸€å€‹é«”çš„å­˜åœ¨èˆ‡å¦ä¸å½±éŸ¿æŸ¥è©¢çµæœ

import numpy as np

def laplace_mechanism(true_value, sensitivity, epsilon):
    """
    æ‹‰æ™®æ‹‰æ–¯æ©Ÿåˆ¶ï¼šå·®åˆ†éš±ç§çš„åŸºæœ¬æ–¹æ³•

    Parameters:
    -----------
    true_value : çœŸå¯¦çµ±è¨ˆå€¼
    sensitivity : æŸ¥è©¢çš„æ•æ„Ÿåº¦ï¼ˆç§»é™¤ä¸€å€‹äººæœ€å¤šæ”¹è®Šå¤šå°‘ï¼‰
    epsilon : éš±ç§é ç®—ï¼ˆè¶Šå°è¶Šéš±ç§ï¼Œä½†çµæœè¶Šä¸æº–ç¢ºï¼‰
    """
    noise = np.random.laplace(0, sensitivity / epsilon)
    return true_value + noise

# ä¾‹å­ï¼šæŸç–¾ç—…åœ¨è³‡æ–™é›†ä¸­çš„çœŸå¯¦æ¯”ç‡
true_rate = 0.15  # 15%

# ä¸åŒéš±ç§ç­‰ç´šçš„çµæœ
for eps in [0.1, 0.5, 1.0, 5.0]:
    results = [laplace_mechanism(true_rate, 1/1000, eps) for _ in range(100)]
    print(f"epsilon={eps:.1f}: å¹³å‡={np.mean(results):.4f}, æ¨™æº–å·®={np.std(results):.4f}")
    # epsilon è¶Šå° â†’ éš±ç§è¶Šå¥½ â†’ çµæœè¶Šä¸ç©©å®š
```

---

## 16.7 è² è²¬ä»»çš„ AI åŸå‰‡

### å…­å¤§åŸå‰‡

```
                     è² è²¬ä»»çš„ AI
                         |
        +--------+------+------+--------+
        |        |      |      |        |
        v        v      v      v        v
    +------+ +------+ +----+ +------+ +------+
    |å…¬å¹³æ€§| |é€æ˜æ€§| |éš±ç§| |å®‰å…¨æ€§| |åŒ…å®¹æ€§|
    |Fair- | |Trans-| |Pri-| |Safe- | |Inclu-|
    |ness  | |paren-| |vacy| |ty &  | |sive- |
    |      | |cy    | |    | |Relia-| |ness  |
    |      | |      | |    | |bility| |      |
    +------+ +------+ +----+ +------+ +------+
        |        |      |      |        |
        v        v      v      v        v
    +----------------------------------------------+
    |            å•è²¬æ€§ (Accountability)              |
    |  èª°å° AI çš„æ±ºç­–è² è²¬ï¼Ÿå‡ºäº†å•é¡Œèª°è² è²¬ï¼Ÿ          |
    +----------------------------------------------+
```

### å¯¦è¸æ¸…å–®

```
è² è²¬ä»»çš„ AI å¯¦è¸ Checklistï¼š
+----------------------------------------------------------+
|                                                            |
| â–¡ è³‡æ–™æ”¶é›†éšæ®µ                                             |
|   â–¡ è³‡æ–™ä¾†æºæ˜¯å¦åˆæ³•ä¸”ç¶“éåŒæ„ï¼Ÿ                          |
|   â–¡ è³‡æ–™æ˜¯å¦å…·æœ‰ä»£è¡¨æ€§ï¼Ÿ                                  |
|   â–¡ æ˜¯å¦æœ‰æ½›åœ¨çš„æ­·å²åè¦‹ï¼Ÿ                                |
|   â–¡ æ˜¯å¦æ”¶é›†äº†æœ€å°‘å¿…è¦çš„è³‡æ–™ï¼Ÿ                            |
|                                                            |
| â–¡ æ¨¡å‹é–‹ç™¼éšæ®µ                                             |
|   â–¡ æ˜¯å¦è€ƒæ…®äº†å¯è§£é‡‹æ€§éœ€æ±‚ï¼Ÿ                              |
|   â–¡ æ˜¯å¦æ¸¬è©¦äº†ä¸åŒç¾¤é«”çš„è¡¨ç¾å·®ç•°ï¼Ÿ                        |
|   â–¡ æ˜¯å¦è©•ä¼°äº†å…¬å¹³æ€§æŒ‡æ¨™ï¼Ÿ                                |
|   â–¡ æ˜¯å¦æœ‰äººé¡ç›£ç£æ©Ÿåˆ¶ï¼Ÿ                                  |
|                                                            |
| â–¡ æ¨¡å‹éƒ¨ç½²éšæ®µ                                             |
|   â–¡ æ˜¯å¦æœ‰æŒçºŒç›£æ§å…¬å¹³æ€§çš„æ©Ÿåˆ¶ï¼Ÿ                          |
|   â–¡ ä½¿ç”¨è€…æ˜¯å¦çŸ¥é“ AI åœ¨åšæ±ºç­–ï¼Ÿ                          |
|   â–¡ æ˜¯å¦æä¾›äº†ç”³è¨´ç®¡é“ï¼Ÿ                                  |
|   â–¡ æ˜¯å¦æœ‰å›é€€æ©Ÿåˆ¶ï¼ˆfallback to humanï¼‰ï¼Ÿ                 |
|                                                            |
| â–¡ æŒçºŒç¶­è­·éšæ®µ                                             |
|   â–¡ æ˜¯å¦å®šæœŸé‡æ–°è©•ä¼°æ¨¡å‹å…¬å¹³æ€§ï¼Ÿ                          |
|   â–¡ è³‡æ–™åˆ†å¸ƒæ˜¯å¦ç™¼ç”Ÿäº†æ¼‚ç§»ï¼Ÿ                              |
|   â–¡ æ–°çš„æ³•è¦è¦æ±‚æ˜¯å¦å·²ç´å…¥ï¼Ÿ                              |
|   â–¡ åˆ©å®³é—œä¿‚äººçš„å›é¥‹æ˜¯å¦è¢«æ•´åˆï¼Ÿ                          |
|                                                            |
+----------------------------------------------------------+
```

---

## 16.8 æ¨¡å‹å…¬å¹³æ€§ç¨½æ ¸ï¼šå¯¦æˆ°æ¼”ç·´

### å®Œæ•´çš„å…¬å¹³æ€§ç¨½æ ¸æµç¨‹

```python
import numpy as np
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.ensemble import GradientBoostingClassifier
from sklearn.metrics import (
    classification_report,
    confusion_matrix,
    roc_auc_score
)

# === æ­¥é©Ÿ 1ï¼šæº–å‚™è³‡æ–™ ===
# æ¨¡æ“¬ä¸€å€‹è²¸æ¬¾å¯©æ ¸è³‡æ–™é›†
np.random.seed(42)
n = 5000

data = pd.DataFrame({
    'income': np.random.normal(50000, 15000, n),
    'credit_score': np.random.normal(650, 80, n),
    'debt_ratio': np.random.uniform(0.1, 0.8, n),
    'employment_years': np.random.exponential(5, n),
    'age': np.random.normal(40, 12, n).clip(18, 70),
    'gender': np.random.binomial(1, 0.5, n),  # 0: å¥³, 1: ç”·
})

# æ¨¡æ“¬å¸¶æœ‰åè¦‹çš„æ­·å²æ±ºç­–
# ï¼ˆæ•…æ„è®“æ€§åˆ¥å°çµæœæœ‰å¾®å¦™çš„å½±éŸ¿ï¼‰
approval_prob = (
    0.3 * (data['income'] > 45000).astype(float) +
    0.3 * (data['credit_score'] > 630).astype(float) +
    0.2 * (data['debt_ratio'] < 0.5).astype(float) +
    0.1 * (data['employment_years'] > 3).astype(float) +
    0.05 * data['gender'] +  # â† æ­·å²åè¦‹ï¼
    np.random.normal(0, 0.15, n)
)
data['approved'] = (approval_prob > 0.5).astype(int)

# === æ­¥é©Ÿ 2ï¼šè¨“ç·´æ¨¡å‹ ===
features = ['income', 'credit_score', 'debt_ratio', 'employment_years', 'age']
# æ³¨æ„ï¼šæˆ‘å€‘æ²’æœ‰ç”¨ gender ä½œç‚ºç‰¹å¾µï¼Œä½†åè¦‹ä»ç„¶å¯èƒ½å­˜åœ¨

X = data[features]
y = data['approved']
sensitive = data['gender']

X_train, X_test, y_train, y_test, sens_train, sens_test = train_test_split(
    X, y, sensitive, test_size=0.3, random_state=42
)

model = GradientBoostingClassifier(n_estimators=100, random_state=42)
model.fit(X_train, y_train)
y_pred = model.predict(X_test)
y_prob = model.predict_proba(X_test)[:, 1]

# === æ­¥é©Ÿ 3ï¼šæ•´é«”è¡¨ç¾ ===
print("="*50)
print("æ•´é«”æ¨¡å‹è¡¨ç¾")
print("="*50)
print(classification_report(y_test, y_pred))
print(f"AUC-ROC: {roc_auc_score(y_test, y_prob):.4f}")

# === æ­¥é©Ÿ 4ï¼šåˆ†ç¾¤åˆ†æ ===
print("\n" + "="*50)
print("åˆ†ç¾¤è¡¨ç¾åˆ†æ")
print("="*50)

for group_val, group_name in [(0, 'å¥³æ€§'), (1, 'ç”·æ€§')]:
    mask = sens_test == group_val
    print(f"\n--- {group_name} ---")
    print(f"æ¨£æœ¬æ•¸: {mask.sum()}")
    print(f"é€šéç‡: {y_pred[mask].mean():.4f}")
    print(f"AUC-ROC: {roc_auc_score(y_test[mask], y_prob[mask]):.4f}")

    cm = confusion_matrix(y_test[mask], y_pred[mask])
    if cm.shape == (2, 2):
        tn, fp, fn, tp = cm.ravel()
        tpr = tp / (tp + fn) if (tp + fn) > 0 else 0
        fpr = fp / (fp + tn) if (fp + tn) > 0 else 0
        print(f"TPR (True Positive Rate): {tpr:.4f}")
        print(f"FPR (False Positive Rate): {fpr:.4f}")

# === æ­¥é©Ÿ 5ï¼šå…¬å¹³æ€§æŒ‡æ¨™ ===
print("\n" + "="*50)
print("å…¬å¹³æ€§æŒ‡æ¨™")
print("="*50)

dp = demographic_parity(y_pred, sens_test.values)

print(f"\nEqual Opportunity Difference:")
eo = equal_opportunity(y_test.values, y_pred, sens_test.values)
```

### ç¨½æ ¸å ±å‘Šæ¨¡æ¿

```
+----------------------------------------------------------+
|            æ¨¡å‹å…¬å¹³æ€§ç¨½æ ¸å ±å‘Š                               |
+----------------------------------------------------------+
| æ—¥æœŸï¼š_____________    ç¨½æ ¸äººï¼š_____________               |
| æ¨¡å‹åç¨±ï¼š_________    ç‰ˆæœ¬ï¼š_______________               |
+----------------------------------------------------------+
|                                                            |
| 1. æ¨¡å‹æ¦‚è¿°                                                |
|    ç›®çš„ï¼š                                                  |
|    å—ä¿è­·ç¾¤é«”ï¼š                                            |
|    ä½¿ç”¨å ´æ™¯ï¼š                                              |
|                                                            |
| 2. æ•´é«”è¡¨ç¾                                                |
|    Accuracyï¼š___    AUC-ROCï¼š___                           |
|    Precisionï¼š___   Recallï¼š___                            |
|                                                            |
| 3. åˆ†ç¾¤è¡¨ç¾                                                |
|    | ç¾¤é«” | é€šéç‡ | TPR  | FPR  | AUC  |                 |
|    |------|--------|------|------|------|                 |
|    | A    |        |      |      |      |                 |
|    | B    |        |      |      |      |                 |
|                                                            |
| 4. å…¬å¹³æ€§æŒ‡æ¨™                                              |
|    Demographic Parity Diffï¼š___                            |
|    Equal Opportunity Diffï¼š___                             |
|    Predictive Parity Diffï¼š___                             |
|                                                            |
| 5. é¢¨éšªè©•ä¼°                                                |
|    â–¡ ä½é¢¨éšª  â–¡ ä¸­é¢¨éšª  â–¡ é«˜é¢¨éšª                           |
|                                                            |
| 6. å»ºè­°æªæ–½                                                |
|    _____________________________________________           |
|                                                            |
+----------------------------------------------------------+
```

---

## 16.9 âš ï¸ å¸¸è¦‹é™·é˜±

```
é™·é˜± 1ï¼šã€Œæˆ‘æ²’ç”¨æ•æ„Ÿç‰¹å¾µï¼Œæ‰€ä»¥æ¨¡å‹ä¸€å®šå…¬å¹³ã€
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
éŒ¯ï¼ä»£ç†è®Šæ•¸ï¼ˆproxy variablesï¼‰å¯èƒ½é–“æ¥æ´©æ¼æ•æ„Ÿè³‡è¨Šã€‚
ä¾‹å¦‚ï¼šéƒµéå€è™Ÿ â†’ ç¨®æ—ï¼Œåå­— â†’ æ€§åˆ¥

é™·é˜± 2ï¼šã€Œæ¨¡å‹ accuracy å¾ˆé«˜ï¼Œæ‰€ä»¥æ²’å•é¡Œã€
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
éŒ¯ï¼æ•´é«”è¡¨ç¾å¥½ä¸ä»£è¡¨å°æ¯å€‹å­ç¾¤é«”éƒ½å…¬å¹³ã€‚
å¿…é ˆåˆ†ç¾¤æª¢æŸ¥æ¨¡å‹è¡¨ç¾ã€‚

é™·é˜± 3ï¼šã€Œæˆ‘ç”¨äº† SMOTEï¼Œæ‰€ä»¥è§£æ±ºäº†ä¸å¹³è¡¡å•é¡Œã€
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SMOTE å¯ä»¥å¹«åŠ©ï¼Œä½†ä¸æ˜¯è¬èƒ½çš„ã€‚
åˆæˆçš„æ¨£æœ¬å¯èƒ½ä¸åæ˜ çœŸå¯¦åˆ†å¸ƒï¼Œéåº¦åˆæˆå¯èƒ½å°è‡´éæ“¬åˆã€‚

é™·é˜± 4ï¼šã€Œå¯è§£é‡‹æ€§ä¸é‡è¦ï¼Œåæ­£ä½¿ç”¨è€…ä¸æœƒçœ‹ã€
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ³•è¦å¯èƒ½è¦æ±‚å¯è§£é‡‹æ€§ï¼ˆå¦‚ GDPR ç¬¬ 22 æ¢ï¼‰ã€‚
å‡ºå•é¡Œæ™‚ï¼Œä¸å¯è§£é‡‹çš„æ¨¡å‹å¾ˆé›£ debugã€‚

é™·é˜± 5ï¼šã€Œå…¬å¹³æ€§åªéœ€è¦åœ¨éƒ¨ç½²å‰æª¢æŸ¥ä¸€æ¬¡ã€
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
éŒ¯ï¼è³‡æ–™åˆ†å¸ƒæœƒéš¨æ™‚é–“è®ŠåŒ–ï¼ˆdata driftï¼‰ï¼Œ
æ¨¡å‹çš„å…¬å¹³æ€§ä¹Ÿéœ€è¦æŒçºŒç›£æ§ã€‚

é™·é˜± 6ï¼šã€ŒæŠ€è¡“å¯ä»¥å®Œå…¨è§£æ±ºåè¦‹å•é¡Œã€
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åè¦‹æ˜¯ç¤¾æœƒå•é¡Œï¼ŒæŠ€è¡“åªèƒ½ç·©è§£ï¼Œä¸èƒ½æ ¹é™¤ã€‚
éœ€è¦æŠ€è¡“äººå“¡ã€é ˜åŸŸå°ˆå®¶ã€æ”¿ç­–åˆ¶å®šè€…å…±åŒåŠªåŠ›ã€‚
```

---

## 16.10 ç¸½çµï¼šä½ ä½œç‚º ML å·¥ç¨‹å¸«çš„è²¬ä»»

```
+----------------------------------------------------------+
|                                                            |
|  ä½œç‚º ML å·¥ç¨‹å¸«ï¼Œä½ æœ‰è²¬ä»»ï¼š                               |
|                                                            |
|  1. è³ªç–‘è³‡æ–™                                              |
|     - è³‡æ–™å¾å“ªè£¡ä¾†ï¼Ÿ                                      |
|     - èª°è¢«éºæ¼äº†ï¼Ÿ                                        |
|     - å­˜åœ¨ä»€éº¼æ¨£çš„æ­·å²åè¦‹ï¼Ÿ                              |
|                                                            |
|  2. è³ªç–‘ç›®æ¨™                                              |
|     - æˆ‘å€‘å„ªåŒ–çš„æŒ‡æ¨™æ˜¯å¦æ­£ç¢ºï¼Ÿ                            |
|     - ä»£ç†æŒ‡æ¨™æ˜¯å¦åˆé©ï¼Ÿ                                  |
|     - èª°å®šç¾©äº†ã€ŒæˆåŠŸã€ï¼Ÿ                                  |
|                                                            |
|  3. è³ªç–‘å½±éŸ¿                                              |
|     - æ¨¡å‹çš„éŒ¯èª¤æœƒå¦‚ä½•å‚·å®³äººï¼Ÿ                            |
|     - å“ªäº›ç¾¤é«”æœ€å®¹æ˜“å—å®³ï¼Ÿ                                |
|     - æœ€å£çš„æƒ…æ³æ˜¯ä»€éº¼ï¼Ÿ                                  |
|                                                            |
|  4. æŒçºŒç›£æ§                                              |
|     - æ¨¡å‹éƒ¨ç½²å¾Œçš„è¡¨ç¾æœ‰è®ŠåŒ–å—ï¼Ÿ                          |
|     - æ–°çš„åè¦‹æ˜¯å¦å‡ºç¾ï¼Ÿ                                  |
|     - ä½¿ç”¨è€…çš„å›é¥‹èªªäº†ä»€éº¼ï¼Ÿ                              |
|                                                            |
|  è¨˜ä½ï¼šæŠ€è¡“æ˜¯å·¥å…·ï¼Œåƒ¹å€¼è§€æ‰æ˜¯æŒ‡å—é‡ã€‚                     |
|                                                            |
+----------------------------------------------------------+
```

---

## ğŸ“ èª²å¾Œç·´ç¿’

### ç·´ç¿’ 1ï¼šåè¦‹åµæ¸¬
```
ä½¿ç”¨ sklearn çš„ Adult Census è³‡æ–™é›†ï¼ˆæˆ–é¡ä¼¼è³‡æ–™é›†ï¼‰ï¼Œ
å»ºç«‹ä¸€å€‹æ”¶å…¥é æ¸¬æ¨¡å‹ï¼Œç„¶å¾Œï¼š
1. ä»¥æ€§åˆ¥ç‚ºæ•æ„Ÿç‰¹å¾µï¼Œè¨ˆç®— Demographic Parity
2. ä»¥ç¨®æ—ç‚ºæ•æ„Ÿç‰¹å¾µï¼Œè¨ˆç®— Equal Opportunity
3. å˜—è©¦è‡³å°‘ä¸€ç¨®æ–¹æ³•ä¾†æ”¹å–„å…¬å¹³æ€§
4. æ¯”è¼ƒæ”¹å–„å‰å¾Œçš„å…¬å¹³æ€§æŒ‡æ¨™å’Œæ¨¡å‹è¡¨ç¾
```

### ç·´ç¿’ 2ï¼šå¯è§£é‡‹æ€§æ¯”è¼ƒ
```
å°åŒä¸€å€‹å•é¡Œï¼Œåˆ†åˆ¥è¨“ç·´ï¼š
1. æ±ºç­–æ¨¹
2. éš¨æ©Ÿæ£®æ—
3. æ¢¯åº¦æå‡æ©Ÿ (GBM)

å°æ¯å€‹æ¨¡å‹ï¼š
- ä½¿ç”¨ SHAP æˆ– LIME è§£é‡‹é æ¸¬
- æ¯”è¼ƒä¸åŒæ¨¡å‹çš„è§£é‡‹æ˜¯å¦ä¸€è‡´
- è¨è«–ï¼šå¦‚æœè§£é‡‹ä¸ä¸€è‡´ï¼Œä½ ä¿¡ä»»å“ªä¸€å€‹ï¼Ÿç‚ºä»€éº¼ï¼Ÿ
```

### ç·´ç¿’ 3ï¼šå€«ç†æ¡ˆä¾‹åˆ†æ
```
é¸æ“‡ä»¥ä¸‹ä¸€å€‹å ´æ™¯ï¼Œå¯«ä¸€ä»½ 500 å­—çš„åˆ†æå ±å‘Šï¼š

A. ä½ çš„å…¬å¸è¦éƒ¨ç½²ä¸€å€‹ AI é¢è©¦è©•åˆ†ç³»çµ±
B. é†«é™¢è¦ç”¨ AI ä¾†åˆ†é… ICU åºŠä½
C. ä¿éšªå…¬å¸è¦ç”¨ç¤¾ç¾¤åª’é«”è³‡æ–™ä¾†å®šåƒ¹

åˆ†æï¼š
- å¯èƒ½å­˜åœ¨å“ªäº›åè¦‹ï¼Ÿ
- ä½ æœƒæ¨è–¦å“ªäº›å…¬å¹³æ€§æŒ‡æ¨™ï¼Ÿ
- ä½ çš„ AI æ²»ç†å»ºè­°æ˜¯ä»€éº¼ï¼Ÿ
- æœ‰å“ªäº›è³‡æ–™ä¸æ‡‰è©²è¢«æ”¶é›†æˆ–ä½¿ç”¨ï¼Ÿ
```

### ç·´ç¿’ 4ï¼šéš±ç§ä¿è­·å¯¦ä½œ
```
å¯¦ä½œä¸€å€‹ç°¡å–®çš„å·®åˆ†éš±ç§æ©Ÿåˆ¶ï¼š
1. ä½¿ç”¨ Laplace Mechanism å°æŸ¥è©¢çµæœåŠ å…¥å™ªéŸ³
2. æ¯”è¼ƒä¸åŒ epsilon å€¼ä¸‹çš„çµæœæº–ç¢ºæ€§
3. ç•«å‡º epsilon å’Œæº–ç¢ºæ€§çš„ trade-off æ›²ç·š
4. è¨è«–ï¼šåœ¨ä½ çš„æ‡‰ç”¨å ´æ™¯ä¸­ï¼Œä½ æœƒé¸æ“‡ä»€éº¼ epsilon å€¼ï¼Ÿ
```

---

## å»¶ä¼¸é–±è®€

| è³‡æº | é¡å‹ | èªªæ˜ |
|------|------|------|
| Fairlearn (Microsoft) | å·¥å…· | Python å…¬å¹³æ€§è©•ä¼°èˆ‡ç·©è§£å·¥å…·åŒ… |
| AI Fairness 360 (IBM) | å·¥å…· | åè¦‹åµæ¸¬èˆ‡ç·©è§£çš„ç¶œåˆå¥—ä»¶ |
| "Weapons of Math Destruction" | æ›¸ç± | æ¼”ç®—æ³•å¦‚ä½•åŠ åŠ‡ç¤¾æœƒä¸å¹³ç­‰ |
| "Algorithms of Oppression" | æ›¸ç± | æœå°‹å¼•æ“ä¸­çš„åè¦‹ |
| GDPR å®˜æ–¹æ–‡ä»¶ | æ³•è¦ | æ­ç›Ÿè³‡æ–™ä¿è­·æ³•è¦å…¨æ–‡ |
| Montreal Declaration for Responsible AI | å®£è¨€ | è² è²¬ä»» AI çš„åŸå‰‡æ¡†æ¶ |
| Google's AI Principles | æŒ‡å— | Google çš„ AI é–‹ç™¼åŸå‰‡ |

---

> **ä¸‹ä¸€ç« é å‘Šï¼š** åœ¨ç¬¬ 17 ç« ä¸­ï¼Œæˆ‘å€‘å°‡æŠŠæ•´é–€èª²æ‰€å­¸çš„ä¸€åˆ‡æ•´åˆèµ·ä¾†ï¼Œ
> å®Œæˆä¸€å€‹å®Œæ•´çš„å°ˆæ¡ˆè£½ä½œèˆ‡æœŸæœ«ç™¼è¡¨ã€‚ä½ æº–å‚™å¥½äº†å—ï¼Ÿ
