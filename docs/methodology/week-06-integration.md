# 第 6 週：整合 — 從數據到決策

> 怎麼把分析變成可行動的建議？

---

## 🎯 學習核心

整合前五週的三大方法：

- **推論**（Week 1-2）：量化不確定性
- **實驗**（Week 3）：建立因果關係
- **評估**（Week 4-5）：驗證模型價值

本週目標：把這些方法串連成一個完整的**決策系統**。

---

## 為什麼這件事重要？

你已經學會了統計推論、假設檢定、因果推論、模型訓練、模型評估。但在真實世界中，這些技能不會單獨使用。

老闆不會問你「p-value 是多少」，他會問：

> 「我們該不該投資這個功能？風險多大？預期回報多少？」

**把分析轉化為決策，才是資料科學的終極目標。**

---

## 終極框架：從數據到決策

![資料科學工作流程](https://www.business-science.io/assets/2019-06-27-data-science-workflow/the-data-science-workflow.jpeg)

```
問題定義
    ↓
抽樣與資料收集
    ↓
探索性分析與推論
    ↓
設計實驗（若可行）
    ↓
建模
    ↓
評估
    ↓
不確定性分析
    ↓
決策與回饋
```

---

### Step 1：問題定義

**最重要卻最常被跳過的步驟。**

好的問題定義：
- ✅ 「將月度客戶流失率從 8% 降低到 6%，預計帶來每月 $200K 的營收保留」
- ✅ 「識別高風險貸款申請，將違約率從 5% 降到 3%，同時維持核貸率在 70% 以上」

壞的問題定義：
- ❌ 「用 AI 改善客戶體驗」
- ❌ 「建一個機器學習模型」

**問題定義框架**：

```
1. 業務目標是什麼？（量化）
2. 成功的衡量標準是什麼？（指標）
3. 決策的利害關係人是誰？
4. 有哪些限制條件？（時間、預算、資料）
5. 最差的情況是什麼？可以接受嗎？
```

---

### Step 2：資料收集與品質

![實驗流程](https://www.researchgate.net/publication/397384001/figure/fig1/AS%3A11431281718942985%401762574365766/Pipeline-of-the-experiment-The-figure-reports-the-analysis-performed-on-two-sequential.png)

**資料品質清單**：

| 面向 | 檢查項目 | 重要性 |
|------|---------|--------|
| 完整性 | 缺失值比例？缺失是隨機的還是系統性的？ | ⭐⭐⭐⭐⭐ |
| 準確性 | 資料有沒有錯誤？和其他來源交叉驗證 | ⭐⭐⭐⭐⭐ |
| 時效性 | 資料的時間範圍？是否仍能反映現況？ | ⭐⭐⭐⭐ |
| 代表性 | 樣本能代表目標母體嗎？有沒有選擇偏差？ | ⭐⭐⭐⭐ |
| 一致性 | 定義是否統一？不同系統的資料能對齊嗎？ | ⭐⭐⭐ |

> **Garbage In, Garbage Out** — 再好的模型也救不了爛資料。

---

### Step 3：探索性分析與推論

運用 Week 1-2 的方法：

1. **描述性統計**：先理解資料的分布和特性
2. **視覺化**：用圖表發現模式和異常
3. **信賴區間**：量化關鍵數字的不確定性
4. **假設檢定**：驗證初步觀察是否可靠

```
探索 → 形成假說 → 驗證假說 → 更新理解
  ↑                                    ↓
  ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←
```

---

### Step 4：實驗設計

運用 Week 3 的方法：

- 能做 A/B 測試嗎？→ 設計隨機對照實驗
- 不能隨機化？→ 準實驗方法（DID、RDD、IV）
- 只有觀察資料？→ 控制混淆變數，但謹慎宣稱因果

---

### Step 5-6：建模與評估

運用 Week 4-5 的方法：

- 正確切分資料，避免洩漏
- 用交叉驗證選擇模型
- 根據業務情境選擇正確指標
- 調整閾值以最大化業務價值

---

### Step 7：不確定性分析

![不確定性下的決策](https://www.researchgate.net/publication/260360568/figure/fig1/AS%3A670000981483530%401536752090433/Decision-Making-under-Uncertainty-Based-on-Pratt-et-al-1965-and-Expanded-by-Einstein.png)

**不確定性分析**：任何分析結果都有不確定性。報告結果時，不能只給一個數字。

```
不要說：「預測收入將增加 $500K」
要說：「預測收入增加 $300K - $700K（95% CI），中位數 $500K」
```

**敏感性分析**：改變關鍵假設，觀察結論是否改變。

| 情境 | 假設 | 預期效果 | 信心程度 |
|------|------|---------|---------|
| 樂觀 | 轉換率提升 5% | +$700K | 20% |
| 基準 | 轉換率提升 3% | +$500K | 60% |
| 悲觀 | 轉換率提升 1% | +$200K | 20% |

---

### Step 8：決策與回饋

![決策框架](https://www.sapbwconsulting.com/hs-fs/hubfs/Mastering%20Decision%20Making%20and%20Uncertainty_%20A%20Leaders%20Guide%20-%20visual%20selection.png?height=3621&name=Mastering+Decision+Making+and+Uncertainty_+A+Leaders+Guide+-+visual+selection.png&width=3756)

**決策報告模板**：

```markdown
## 決策建議書

### 1. 問題摘要
[一段話描述要解決什麼問題]

### 2. 方法概述
[用了什麼資料、什麼分析方法]

### 3. 關鍵發現
- 發現 1（附信賴區間）
- 發現 2（附效果量）
- 發現 3（附統計檢定結果）

### 4. 不確定性與風險
- 主要不確定性：[列出]
- 敏感性分析結果：[表格]
- 已知限制：[列出]

### 5. 建議方案
| 方案 | 預期效益 | 風險 | 成本 | 建議 |
|------|---------|------|------|------|

### 6. 下一步行動
- [ ] 行動 1（負責人、期限）
- [ ] 行動 2
- [ ] 驗證計畫
```

---

## 🧪 期末專題

### 專題要求

選擇一個你感興趣的問題（可以用公開資料集），完成一份包含以下要素的**完整分析報告**：

| 章節 | 內容 | 對應週次 | 配分 |
|------|------|---------|------|
| 1. 問題定義 | 明確、可量化的業務問題 | Week 6 | 10% |
| 2. 資料來源與抽樣方式 | 資料描述、品質評估、代表性分析 | Week 1 | 10% |
| 3. 探索性分析 | 描述性統計、視覺化、信賴區間 | Week 1-2 | 15% |
| 4. 推論方法 | 假設檢定、多重比較修正 | Week 2 | 10% |
| 5. 實驗設計 | A/B 測試設計或準實驗方法 | Week 3 | 15% |
| 6. 模型建構 | 正確的資料切分、交叉驗證 | Week 4 | 10% |
| 7. 評估指標 | 根據業務情境選擇的指標、閾值分析 | Week 5 | 10% |
| 8. 不確定性分析 | 信賴區間、敏感性分析、風險評估 | Week 6 | 10% |
| 9. 決策建議 | 可行動的建議、預期效益、監控計畫 | Week 6 | 10% |

### 推薦資料集

如果你還沒想好題目，可以從這些資料集出發：

| 資料集 | 問題方向 | 難度 |
|--------|---------|------|
| [Kaggle: Credit Card Fraud](https://www.kaggle.com/mlg-ulb/creditcardfraud) | 詐騙偵測、不平衡分類 | ⭐⭐ |
| [UCI: Online Retail](https://archive.ics.uci.edu/ml/datasets/online+retail) | 客戶分群、RFM 分析 | ⭐⭐ |
| [Kaggle: House Prices](https://www.kaggle.com/c/house-prices-advanced-regression-techniques) | 房價預測、特徵工程 | ⭐⭐⭐ |
| [Google Analytics Sample](https://console.cloud.google.com/marketplace/details/obfuscated-ga360-data/obfuscated-ga360-data) | 行銷歸因、轉換分析 | ⭐⭐⭐ |
| 自行收集的資料 | 自定義 | ⭐⭐⭐⭐ |

### 報告格式

- **長度**：4-8 頁（不含程式碼）
- **格式**：Jupyter Notebook 或 Markdown + Python scripts
- **程式碼**：附在報告中或獨立的 `.py` 檔案
- **可重現**：包含 `requirements.txt`，`git clone` 後可直接執行

### 評分標準

參考 [作品集評分規準](../../README.md#-作品集評分規準-portfolio-rubric)，特別注意：

- **實驗嚴謹度**：有沒有正確使用本模組學到的方法？
- **商業價值**：分析結果能否轉化為可行動的建議？
- **不確定性**：有沒有誠實報告分析的限制？

---

## 🧠 最終反思

回顧這六週，請回答：

1. **哪一週的內容對你衝擊最大？** 為什麼？

2. **你對「資料驅動決策」的理解有什麼改變？**

3. **列出 3 個你過去可能犯過的統計錯誤**，以及現在你會怎麼避免。

4. **未來當你拿到一個資料集時，你的分析流程會是什麼？** 用 5-7 個步驟描述。

---

## 模組核心思維（再次提醒）

請記住三句話：

```
1. 不被樣本欺騙    — 任何數字都有不確定性
2. 不把相關當因果   — 沒有實驗設計，就沒有因果宣稱
3. 不被模型指標迷惑 — 指標要配合情境選擇，沒有萬用指標
```

> 帶著這三句話，你已經從「會跑模型的人」進階為「能設計決策系統的人」了。

---

## 延伸學習路徑

想繼續深入？推薦以下方向：

| 方向 | 推薦資源 | 適合誰 |
|------|---------|--------|
| 因果推論進階 | Pearl, *The Book of Why* | 想深入因果推論理論 |
| 貝葉斯統計 | McElreath, *Statistical Rethinking* | 想用另一個框架看推論 |
| 機器學習理論 | Hastie et al., *ESL* | 想深入理解模型背後的數學 |
| 商業分析 | Provost & Fawcett, *Data Science for Business* | 想強化商業思維 |
| 實驗設計進階 | Kohavi et al., *Trustworthy Online Controlled Experiments* | 想在科技公司做 A/B 測試 |

---

## 本週 Checklist

- [ ] 閱讀完整框架
- [ ] 選定期末專題題目
- [ ] 完成期末專題報告初稿
- [ ] 回答最終反思問題
- [ ] 將完整專題推送至 GitHub
- [ ] 完成同儕互評

---

[← 上一週：模型評估與指標選擇](week-05-model-evaluation.md) ｜ [→ 回到模組首頁](README.md)
