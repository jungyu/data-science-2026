# Chapter 1：系統架構師思維模型

> **本章定位**：認知升級。把你從「寫程式的人」拉到「設計系統的人」。
>
> 「初級工程師問『這段程式怎麼寫』，架構師問『這個系統五年後會怎樣』。」

---

## 你現在在哪裡？

先做一個自我評估：

```
Level 1 - Coder（程式員）
  「告訴我要寫什麼，我就寫。」

Level 2 - Developer（開發者）
  「我能理解需求，選擇合適的技術來實現。」

Level 3 - Engineer（工程師）
  「我會考慮測試、部署、效能，寫出可維護的程式。」

Level 4 - Architect（架構師）
  「我設計整個系統的結構，讓它能活五年、跑十年。」

Level 5 - Strategist（策略師）
  「我用技術解決商業問題，並預見下一個轉折點。」
```

這門課的目標：**把你從 Level 1-2 拉到 Level 4 的思維方式**。

你不一定要成為架構師，但你需要架構師的思維。

---

## 第一個轉變：從程式碼到複雜度

### 程式員看到的世界

```python
# 程式員的視角：一個函數
def get_kpi(name):
    result = db.query(f"SELECT value FROM kpis WHERE name = '{name}'")
    return result
```

### 架構師看到的世界

```
同一個功能，架構師看到的是：

┌──── 安全性 ────────────────────────┐
│ SQL Injection 風險！               │
│ 誰有權限呼叫這個函數？              │
│ 查詢結果要不要脫敏？                │
└────────────────────────────────────┘

┌──── 可靠性 ────────────────────────┐
│ 資料庫斷線怎麼辦？                  │
│ 查詢超時要等多久？                  │
│ 要不要有快取層？                    │
└────────────────────────────────────┘

┌──── 可維運性 ──────────────────────┐
│ 誰會維護這段程式？                  │
│ KPI 定義改了怎麼辦？               │
│ 日誌夠不夠除錯用？                  │
└────────────────────────────────────┘

┌──── 演進性 ────────────────────────┐
│ 兩年後 KPI 從 10 個變 1000 個？    │
│ 多租戶（multi-tenant）怎麼辦？      │
│ 要不要支援即時串流？                │
└────────────────────────────────────┘
```

**關鍵洞察**：程式碼只是冰山一角。架構師看的是冰山下面的 90%。

---

## 認知負載轉移

### 什麼是認知負載？

你的大腦一次能處理的資訊量是有限的。心理學家 George Miller 說，大約是 7 ± 2 個「組塊」。

```
程式員的認知負載：
  「這個 for loop 怎麼寫？」
  「這個 API 怎麼呼叫？」
  「這個 bug 在哪一行？」
  → 聚焦在程式碼層級

架構師的認知負載：
  「這三個微服務之間的資料流怎麼走？」
  「如果這個服務掛了，影響範圍是什麼？」
  「這個設計決策三年後會造成什麼技術債？」
  → 聚焦在系統層級
```

### 認知負載的轉移過程

```
Stage 1：語法負載（Syntax Load）
  「Python 的 list comprehension 怎麼寫？」
  → 透過練習，這會變成自動化的肌肉記憶

Stage 2：邏輯負載（Logic Load）
  「這個演算法的時間複雜度是什麼？」
  → 透過經驗，常見 pattern 會變成直覺

Stage 3：架構負載（Architecture Load）
  「這個系統的瓶頸在哪裡？」
  → 這是你現在要開始訓練的思維

Stage 4：策略負載（Strategy Load）
  「這個技術決策對業務有什麼影響？」
  → 架構師的最高境界
```

**你的目標**：把 Stage 1-2 自動化，把大腦的頻寬釋放給 Stage 3-4。

---

## 技術債與資料債

### 技術債（Technical Debt）

**類比**：技術債就像信用卡。你現在先「刷」（走捷徑），以後要「還」（重構）。利息就是維護成本。

```
┌─────────────────────────────────────────┐
│           技術債的四種類型                  │
├──────────────┬──────────────────────────┤
│   刻意的      │    無意的                 │
├──────────────┼──────────────────────────┤
│ 明智的：      │ 明智的：                  │
│ 「我們知道這   │ 「我們現在知道應該          │
│  不是最好的    │  怎麼做了。」              │
│  方案，但      │ （回顧時發現更好的方案）    │
│  deadline      │                          │
│  快到了。」    │                          │
├──────────────┼──────────────────────────┤
│ 魯莽的：      │ 魯莽的：                  │
│ 「管他的，     │ 「什麼是 design           │
│  先上線       │  pattern？」              │
│  再說。」     │ （不知道自己不知道）        │
└──────────────┴──────────────────────────┘
```

### 資料債（Data Debt）

在 AI 系統中，資料債比技術債更危險。

```
資料債的常見形式：

1. 資料品質債
   → 沒有驗證的輸入、格式不一致的欄位
   → AI 會學到錯誤的 pattern

2. 知識庫債
   → 過期的文件沒有清理
   → RAG 會回傳錯誤的資訊

3. 標註債
   → 標註不一致、標註者沒有校準
   → 模型會學到矛盾的規則

4. Schema 債
   → 資料庫 schema 沒有隨業務變化更新
   → 新功能要繞很大的路才能實現
```

**架構師的責任**：辨識、量化、管理這些債務。不是不能有債，是要知道自己欠了多少。

---

## 五年演進思維

### 時間維度的思考

大多數人只想「現在怎麼做」。架構師要想「五年後怎麼樣」。

```
                    現在              1年後            3年後            5年後
                    ──────           ──────          ──────          ──────
用戶數              100              1,000           10,000          100,000
資料量              1 GB             50 GB           500 GB          5 TB
AI 模型             GPT-4            ???             ???             ???
團隊規模            2 人              5 人             15 人           30 人
合規要求            無               基本             嚴格            完整
```

### 架構決策的時間效應

```
決策類型              影響半徑      可逆性       決策成本
────────            ─────────    ────────    ────────
變數命名              1 天         高          低
框架選擇              6 個月       中          中
資料庫選擇            2 年         低          高
架構模式              5 年         很低        很高
治理模型              10 年        極低        極高
```

**原則**：越不可逆的決策，越要慎重。越可逆的決策，越要快速。

### 演進式架構的三個原則

```
原則一：可替換性（Replaceability）
  → 每個組件都應該可以被替換
  → 「如果 OpenAI 明天漲價 10 倍，我能換嗎？」

原則二：可擴展性（Extensibility）
  → 新需求不需要重寫核心
  → 「加一個新 Domain Pack 需要改多少程式？」

原則三：可降級性（Degradability）
  → 部分失效不會拖垮全局
  → 「RAG 服務掛了，系統還能回答嗎？」
```

---

## AI 時代的角色重構

### 傳統 vs AI 時代的架構師

```
傳統架構師：
  設計 → 元件 / 模組 / 服務 之間的互動
  關心 → 效能 / 可靠性 / 可擴展性

AI 時代架構師（你）：
  設計 → 人類 / AI Agent / 工具 / 資料 之間的互動
  關心 → 上述所有 + 可追溯性 / 治理 / 成本 / 偏見
```

### 新的能力模型

```
┌────────────────────────────────────────┐
│          AI 架構師能力金字塔              │
│                                          │
│              ┌──────┐                    │
│              │ 策略  │  ← 商業影響評估     │
│            ┌─┴──────┴─┐                  │
│            │   治理    │  ← 安全/合規      │
│          ┌─┴──────────┴─┐                │
│          │   架構設計    │  ← 系統藍圖     │
│        ┌─┴──────────────┴─┐              │
│        │    工具設計       │  ← MCP/API   │
│      ┌─┴──────────────────┴─┐            │
│      │     資料工程           │  ← RAG/KB │
│    ┌─┴──────────────────────┴─┐          │
│    │      程式設計              │  ← Code │
│    └────────────────────────────┘        │
└────────────────────────────────────────┘
```

你不需要每一層都精通，但你需要**理解每一層的存在與交互方式**。

---

## 動手做：架構師思維訓練

### 練習 1-1：視角切換

拿你目前正在寫的任何一個程式（作業、side project 都行）。

用四個視角重新審視它：

| 視角 | 問題 | 你的回答 |
|------|------|----------|
| 安全性 | 有沒有未驗證的輸入？ | |
| 可靠性 | 外部服務斷線會怎樣？ | |
| 可維運性 | 別人看得懂你的程式嗎？ | |
| 演進性 | 需求翻倍時撐得住嗎？ | |

### 練習 1-2：技術債盤點

列出你目前專案中的三筆技術債：

```markdown
| 債務 | 類型 | 利息（維護成本） | 還款計畫 |
|------|------|-----------------|----------|
| 1.   |      |                 |          |
| 2.   |      |                 |          |
| 3.   |      |                 |          |
```

### 練習 1-3：五年演進劇本

為你的期末專案寫一個「五年演進故事」：

```markdown
## 第 0 年（現在）
- 用戶：___
- 資料量：___
- 架構：___

## 第 1 年
- 變化：___
- 架構需要調整什麼：___

## 第 3 年
- 變化：___
- 什麼決策現在就要做對：___

## 第 5 年
- 變化：___
- 什麼是最不可逆的風險：___
```

---

## 本章重點回顧

```
┌─────────────────────────────────────────────┐
│          架構師思維五大轉變                     │
│                                               │
│  1. 從程式碼 → 複雜度（看冰山下面）             │
│  2. 從語法 → 架構（釋放認知頻寬）               │
│  3. 從功能 → 債務（知道自己欠多少）              │
│  4. 從現在 → 五年（時間維度思考）               │
│  5. 從人機 → 人-AI-工具-資料（新角色定位）       │
└─────────────────────────────────────────────┘
```

---

## 下一章預告

思維模型建立了，接下來要畫藍圖。

在 [Chapter 2：AI × Data 系統藍圖](02-system-architecture-blueprint.md) 中，你會學到：
- 一個 AI 系統的標準架構長什麼樣
- 每一層的責任邊界
- 故障怎麼隔離、不讓一個壞掉拖垮全部

我們要開始畫圖了。
