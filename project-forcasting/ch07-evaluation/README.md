# Ch07 — 模型評估與回測

## 學習目標

- 理解為什麼時間序列不能用一般的 K-fold 交叉驗證
- 掌握 Walk-forward 驗證的原理與實作
- 學會建構含交易成本的回測系統
- 使用 MLflow 追蹤實驗結果

## 核心觀念

**時間序列驗證的核心問題**：
```
錯誤做法（隨機分割）：      正確做法（Walk-forward）：
  [■□■□■■□□■□]              [■■■■■■|□□□□]
  ■=訓練 □=測試              訓練 → 測試（不穿越時間）
  → 未來資訊洩漏！            → 模擬真實交易情境
```

**回測 ≠ 真實績效**：
- 交易成本、滑價、流動性都會侵蝕報酬
- 過擬合回測 → 樣本外表現落差

## 範例檔案

| 檔案 | 說明 |
|------|------|
| `01_walk_forward.py` | Walk-forward 驗證實作 |
| `02_backtesting.py` | 含交易成本的回測系統 |
| `03_mlflow_tracking.py` | MLflow 實驗追蹤 |

## 練習

1. 比較 expanding window 與 sliding window 驗證的差異
2. 調整交易成本比率（0.05% ~ 0.5%），觀察對策略績效的影響
3. 使用 MLflow 記錄不同模型+參數的實驗，找出最佳組合
